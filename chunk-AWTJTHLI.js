import{Aa as l,Ca as b,Fa as g,Qc as f,Sc as p,ba as m,i as d,n as y,na as u,ta as i}from"./chunk-PJL2AZYT.js";function h(t){t||(i(h),t=u(b));let r=new d(n=>t.onDestroy(n.next.bind(n)));return n=>n.pipe(m(r))}function w(t,r){!r?.injector&&i(w);let n=r?.injector??u(l),e=new y(1),c=p(()=>{let s;try{s=t()}catch(o){f(()=>e.error(o));return}f(()=>e.next(s))},{injector:n,manualCleanup:!0});return n.get(b).onDestroy(()=>{c.destroy(),e.complete()}),e.asObservable()}function k(t){t===void 0&&(i(k),t=u(l));let r=t.get(g);return n=>new d(e=>{let c=r.add(),s=!1;function o(){s||(c(),s=!0)}let v=n.subscribe({next:a=>{e.next(a),o()},complete:()=>{e.complete(),o()},error:a=>{e.error(a),o()}});return v.add(()=>{e.unsubscribe(),o()}),v})}export{h as a,w as b,k as c};
